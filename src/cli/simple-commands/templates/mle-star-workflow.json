{
  "name": "MLE-STAR Workflow",
  "version": "2.0.0",
  "description": "Complete Machine Learning Engineering workflow using MLE-STAR methodology (Search and Targeted Refinement)",
  "variables": {
    "dataset_path": "${dataset}",
    "target_column": "${target}",
    "model_output_dir": "models/",
    "experiment_name": "mle_star_experiment",
    "search_iterations": "${search_iterations}",
    "refinement_iterations": "${refinement_iterations}",
    "nums_solutions": "${nums_solutions}",
    "task_description": "${task_description}",
    "max-agents": 7
  },
  "agents": [
    {
      "id": "research_agent",
      "type": "researcher",
      "name": "Web Search & Deep Research Agent",
      "config": {
        "capabilities": [
          "web_search", 
          "model_research", 
          "approach_validation"
        ],
        "search_depth": "comprehensive",
        "domains": [
          "machine_learning", 
          "data_science", 
          "kaggle_solutions",
          "huggingface_models",
          "github_repositories"
        ]
      }
    },
    {
      "id": "foundation_agent", 
      "type": "coder",
      "name": "Foundation Model Builder",
      "config": {
        "capabilities": [
          "data_preprocessing", 
          "initial_modeling", 
          "baseline_creation"
        ],
        "programming_languages": [
          "python", 
          "jupyter"
        ],
        "frameworks": [
          "scikit-learn", 
          "pandas", 
          "numpy", 
          "matplotlib"
        ]
      }
    },
    {
      "id": "ablation_agent",
      "type": "code-analyzer",
      "name": "Ablation Study Analyst",
      "config": {
        "programming_languages": [
          "python", 
          "jupyter"
        ],
        "capabilities": [
          "code_review",
          "ablation_study",
          "performance_analysis"
        ]
      }
    },
    {
      "id": "refinement_agent",
      "type": "optimizer",
      "name": "Targeted Refinement Specialist", 
      "config": {
        "capabilities": [
          "feature_engineering", 
          "model_optimization", 
          "hyperparameter_tuning"
        ],
        "optimization_methods": [
          "grid_search", 
          "bayesian", 
          "evolutionary"
        ],
        "ablation_analysis": true
      }
    },
    {
      "id": "ensemble_agent",
      "type": "architect", 
      "name": "Ensemble & Meta-Learning Expert",
      "config": {
        "capabilities": [
          "model_stacking", 
          "ensemble_methods", 
          "meta_learning"
        ],
        "ensemble_strategies": [
          "voting", 
          "stacking", 
          "blending", 
          "dynamic_weighting"
        ]
      }
    },
    {
      "id": "validation_agent",
      "type": "tester",
      "name": "Validation & Debugging Agent",
      "config": {
        "capabilities": [
          "cross_validation", 
          "error_detection", 
          "data_leakage_prevention"
        ],
        "validation_strategies": [
          "stratified_kfold", 
          "time_series_split", 
          "leave_one_out"
        ],
        "debugging_tools": [
          "profiling", 
          "error_correction", 
          "data_integrity_checks"
        ]
      }
    },
    {
      "id": "orchestrator",
      "type": "coordinator",
      "name": "MLE-STAR Orchestrator",
      "config": {
        "capabilities": [
          "workflow_coordination", 
          "performance_tracking", 
          "resource_management"
        ],
        "coordination_mode": "adaptive",
        "monitoring_enabled": true
      }
    }
  ],
  "tasks": [
    {
      "id": "web_search",
      "name": "Web Search for SOTA Approaches",
      "type": "research",
      "description": "Read the user requirement ${task_description} and generate ${nums_solutions} kinds of machine learning algorithms, benchmarks, state-of-the-art github repository, kaggle solution and huggingface model from web search. Please ignore all files in .memoryignore folder when we searching",
      "assignTo": "research_agent",
      "input": {
        "task_description": "${task_description}",
        "nums_solutions": "${nums_solutions}",
        "retry": "${search_iterations}",
        "search_queries": [
          "latest machine learning models in huggingface to solve ${problem_type}",
          "github latest solutions ${problem_type}",
          "state-of-the-art ${problem_type} benchmarks",
          "feature engineering techniques ${problem_type}",
          "the most famous algorithms for ${problem_type}"
        ]
      },
      "retries": "${search_iterations}",
      "output": {
        "recommended_approaches": "array",
        "code_examples": "array",
        "model_algorithms": "array", 
        "benchmark_results": "object"
      }
    },
    {
      "id": "dataset_analysis",
      "name": "Dataset Analysis & Profiling",
      "type": "analysis",
      "description": "Comprehensive analysis of dataset characteristics, quality, problem type identification and feature engineering recommendations. Please focus on the dataset ${dataset_path} and the specific column ${target} . Please ignore .memoryignore folder when processing the dataset.",
      "assignTo": "foundation_agent",
      "input": {
        "dataset_path": "${dataset_path}",
        "target": "${target_column}"
      },
      "output": {
        "problem_type": "string",
        "characteristics": "object",
        "data_quality_report": "object",
        "recommended_preprocessing": "array",
        "base_models": "array"
      }
    }, 
    {
      "id": "ablation_study",
      "name": "Ablation Analysis of Foundation Model",
      "type": "analysis",
      "description": "You have to review all the components from  the foundation model and dataset views in ablation study. About datasets, please focus on ${problem_type}, ${characteristics}, ${data_quality_report}, ${recommended_preprocessing}; About model, please read the research summarization from ${recommended_approaches}, ${model_algorithms}, ${benchmark_results} and ${implementation_examples}. After that please summarize with key findings and recommendations about which components to keep, discard or improve. Please ignore .memoryignore folder when processing",
      "assignTo": "ablation_agent",
      "depends": ["dataset_analysis", "web_search"],
      "input": { 
        "problem_type": "${dataset_analysis.output.problem_type}", 
        "characteristics": "${dataset_analysis.output.characteristics}",
        "data_quality_report": "${dataset_analysis.output.data_quality_report}",
        "recommended_preprocessing": "${dataset_analysis.output.recommended_preprocessing}",

        "recommended_approaches": "${web_search.output.recommended_approaches}",
        "model_algorithms": "${web_search.output.model_algorithms}",
        "benchmark_results": "${web_search.output.benchmark_results}",
        "implementation_examples": "${web_search.output.code_examples}"
      },
      "output": {
        "highest_impact_component": "string",
        "impact_scores": "object",
        "improvement_opportunities": "array"
      }
    },
    {
      "id": "targeted_refinement",
      "name": "Iterative Component Refinement",
      "type": "optimization",
      "description": "Focus on the ablation study and targeted refinement and generate ways to make the machine learning codes more efficient. It's fine to generate codes, concepts or summarizations. After that, please generate the best model configuration from your refinement. Please ignore .memoryignore folder when processing. ",
      "assignTo": "refinement_agent",
      "depends": ["ablation_study"],
      "input": {
        "highest_impact_component": "${ablation_study.output.highest_impact_component}", 
        "impact_scores": "${ablation_study.output.impact_scores}",
        "improvement_opportunities": "${ablation_study.output.improvement_opportunities}",
        "max_iterations": "${refinement_iterations}"
      },
      "output": {
        "optimized_components": "object",
        "performance_improvements": "object", 
        "best_configuration": "object",
        "refinement_summary": "object"
      }
    },
    {
      "id": "ensemble_creation",
      "name": "Adaptive Ensemble Building",
      "type": "architecture",
      "description": "Focus on the targeted components and try to generate ensemble model with meta-learning techniques to further improve the original model performance.",
      "assignTo": "ensemble_agent",
      "depends": ["targeted_refinement"],
      "input": {
        "base_models": "${dataset_analysis.output.base_models}",
        "individual_performances": "${targeted_refinement.output.performance_improvements}",
        "refinement_summary": "${targeted_refinement.output.refinement_summary}",
        "ensemble_strategies": [
          "stacking_with_meta_learner",
          "dynamic_weighting",
          "bayesian_model_averaging",
          "mixture_of_experts"
        ]
      },
      "output": {
        "ensemble_model": "object",
        "ensemble_performance": "object",
        "combination_strategy": "string",
        "meta_learner_details": "object"
      }
    },
    {
      "id": "validation_and_debugging",
      "name": "Comprehensive Validation & Error Correction",
      "type": "testing",
      "description": "Rigorous validation with data leakage prevention, error correction, and performance verification",
      "assignTo": "validation_agent",
      "depends": ["targeted_refinement"],
      "input": {
        "final_model": "${ensemble_creation.output.ensemble_model}",
        "full_pipeline": "${targeted_refinement.output.best_configuration}",
        "validation_config": {
          "cv_folds": 5,
          "test_size": 0.2,
          "stratification": true,
          "random_seed": 42
        }
      },
      "output": {
        "validation_results": "object",
        "cross_validation_scores": "array",
        "data_leakage_check": "boolean",
        "error_analysis": "object",
        "final_performance_metrics": "object"
      }
    },
    {
      "id": "model_deployment_prep",
      "name": "Production Readiness & Deployment",
      "type": "deployment",
      "description": "Prepare final solutionmodel for production deployment with monitoring, versioning, and documentation",
      "assignTo": "orchestrator",
      "depends": ["ensemble_creation", "validation_and_debugging"],
      "input": {
        "validated_model": "${validation_and_debugging.output}",
        "performance_benchmarks": "${validation_and_debugging.output.final_performance_metrics}",
        "deployment_target": "production"
      },
      "condition": "${validation_and_debugging.output.final_performance_metrics.accuracy} > 0.85",
      "output": {
        "deployment_package": "object",
        "model_documentation": "object",
        "monitoring_config": "object",
        "deployment_instructions": "string"
      }
    }
  ],
  "dependencies": {
    "ablation_study": ["dataset_analysis", "web_search"],
    "targeted_refinement": ["ablation_study"],
    "ensemble_creation": ["targeted_refinement"],
    "validation_and_debugging": ["targeted_refinement"],
    "model_deployment_prep": ["ensemble_creation", "validation_and_debugging"]
  },
  "settings": {
    "maxConcurrency": 3,
    "retryPolicy": "exponential",
    "failurePolicy": "continue",
    "quality_threshold": 0.8,
    "enable_monitoring": true,
    "save_intermediate_results": true,
    "auto_documentation": true
  },
  "metadata": {
    "methodology": "MLE-STAR",
    "version": "2.0.0",
    "created_by": "Claude Flow Automation",
    "tags": ["machine_learning", "automation", "mle_star", "ensemble", "optimization"],
    "description_detailed": "This workflow implements the MLE-STAR (Machine Learning Engineering via Search and Targeted Refinement) methodology. It starts with web search to find state-of-the-art approaches, builds a foundation model, performs ablation analysis to identify high-impact components, then deeply refines those components before creating intelligent ensembles and comprehensive validation.",
    "success_criteria": [
      "Performance improvement over baseline > 5%",
      "No data leakage detected",
      "Cross-validation score variance < 0.05",
      "All components properly documented"
    ]                                       
  }
}